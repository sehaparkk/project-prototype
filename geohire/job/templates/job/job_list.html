<!DOCTYPE html>
<html>
<head>
    <title>Job Listings</title>
</head>
<body>
    <h1>Job Listings</h1>

    <a href="{% url 'create_job' %}">+ Add Job</a>

    <ul>
        {% for job in jobs %}
            <li>
                <h2>{{ job.title }}</h2>
                <p>{{ job.description }}</p>
                
                {% if job.location %}
                    <p><strong>Location:</strong> 
                        {{ job.location.city }}, 
                        {{ job.location.state }},
                        {{ job.location.country }}
                        {% if job.location.zip_code %} - {{ job.location.zip_code }}{% endif %}
                    </p>
                {% endif %}

                {% if not job.hide_salary %}
                    <p><strong>Salary:</strong> 
                        {% if job.salary_min and job.salary_max %}
                            {{ job.salary_min }} - {{ job.salary_max }}
                        {% elif job.salary_min %}
                            From {{ job.salary_min }}
                        {% elif job.salary_max %}
                            Up to {{ job.salary_max }}
                        {% endif %}
                    </p>
                {% endif %}

                <p><strong>Work Type:</strong> {{ job.remote_or_onsite }}</p>

                <p><strong>Visa Sponsorship:</strong> 
                    {% if job.visa_sponsorship %}Yes{% else %}No{% endif %}
                </p>

                {% if job.skills.all %}
                    <p><strong>Skills:</strong> 
                        {% for skill in job.skills.all %}
                            {{ skill.name }}{% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    </p>
                {% endif %}

                <a href="{% url 'edit_job' job.id %}">Edit</a>
            </li>
        {% empty %}
            <li>No jobs available.</li>
        {% endfor %}
    </ul>
</body>
</html>
